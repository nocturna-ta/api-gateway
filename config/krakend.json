{
  "version": 3,
  "name": "API-Gateway",
  "port": 8000,
  "timeout": "30s",
  "cache_ttl": "300s",
  "extra_config": {{ marshal .plugins.global}},
"endpoints": [
{{ range $key, $value := . }} {{ range $value.endpoints }}
{
"endpoint": "{{if $value.base_path}}{{$value.base_path}}{{end}}{{.path}}",
"method": "{{ .method }}",
"output_encoding": "no-op",
"concurrent_calls": 1,
"input_query_strings": ["*"],
"input_headers": ["*"],
"extra_config": {
{{if .auth}}{{ template "auth.tmpl" .}}{{end}}
{{ if $value.extra_config }}, {{ marshal $value.extra_config}} {{ end }}
},
"backend": [
{
"url_pattern": "{{.destination}}",
"encoding": "no-op",
"sd": "static",
"method": "{{.method}}",
"host": [
"{{.host}}"
],
"disable_host_sanitize": false,
"extra_config": {
{{ if $value.backend_extra_config }} {{ marshal $value.backend_extra_config}} {{ end }}
}
}
]
},
{{end}} {{end}}
{
"endpoint": "/status",
"method": "GET",
"output_encoding": "no-op",
"concurrent_calls": 1,
"backend": [
{
"url_pattern": "/__health",
"host": [
"http://localhost:8000"
]
}
]
}
]
}